# Templates y variables requeridas

Esta sección describe las variables mínimas que deben proveerse al renderizar las plantillas incorporadas de Genesis Engine y cómo se utilizan dentro de cada plantilla.

## Variables globales opcionales

El motor de plantillas (`TemplateEngine`) agrega automáticamente las siguientes variables a **todas** las plantillas:

- `generated_at` – marca temporal ISO del momento de renderización. Se usa, por ejemplo, en encabezados de archivos:

  ```python
  # Generated by Genesis Engine at {{ generated_at }}
  ```

- `generator` – nombre del generador que produce el archivo (`"Genesis Engine"`).
- `template_name` – ruta de la plantilla que se está procesando.

Estas variables son opcionales y no es necesario incluirlas en el contexto al invocar el motor.

## Backend FastAPI

Variables requeridas y ejemplos de uso:

- `project_name` – aparece en distintos archivos para nombrar el proyecto.
  ```Dockerfile
  # {{ project_name }} Dockerfile
  ```
  ```python
  "postgresql+asyncpg://postgres:password@localhost:5432/{{ project_name|snake_case }}_db"
  ```
- `description` – utilizado como descripción en la API.
  ```python
  description="{{ description }}"
  ```
- `version` – número de versión expuesto en la documentación.
  ```python
  version="{{ version }}"
  ```
- `entities` – lista de entidades para crear rutas y modelos.
  ```python
  {% for entity in entities %}
  from app.routes.{{ entity.name|snake_case }} import router as {{ entity.name|snake_case }}_router
  {% endfor %}
  ```
- `database_type` – define las dependencias de la base de datos.
  ```jinja
  {% if database_type == 'postgresql' %}
  asyncpg==0.29.0
  {% elif database_type == 'mysql' %}
  aiomysql==0.2.0
  {% elif database_type == 'sqlite' %}
  aiosqlite==0.19.0
  {% endif %}
  ```

Variables opcionales:

- `cors_enabled` – agrega `CORSMiddleware` al iniciar la aplicación.
  ```python
  {% if cors_enabled %}
  app.add_middleware(CORSMiddleware, allow_origins=["*"])
  {% endif %}
  ```
- `auth_enabled` – incluye rutas y dependencias de autenticación.
  ```python
  {% if auth_enabled %}
  from app.auth.router import router as auth_router
  {% endif %}
  ```
- `database_enabled` – crea las tablas en el evento de `startup`.
  ```python
  {% if database_enabled %}
  await conn.run_sync(Base.metadata.create_all)
  {% endif %}
  ```
- `database_url` – permite sobrescribir la URL de conexión en `alembic.ini`.
  ```ini
  sqlalchemy.url = {{ database_url }}
  ```

## Backend NestJS

Variables requeridas y ejemplos de uso:

- `project_name` – nombre del paquete generado.
  ```json
  "name": "{{ project_name|kebab_case }}-backend"
  ```
- `description` – descripción del proyecto en `package.json`.
  ```json
  "description": "{{ description }}"
  ```
- `port` – puerto en el que se inicia la aplicación.
  ```ts
  await app.listen({{ port }});
  ```
- `entities` – lista de entidades para importar y registrar en TypeORM.
  ```ts
  import { {{ entities|map(attribute='name')|join(', ') }} } from '../entities';
  ```

No existen variables opcionales específicas para estas plantillas.

## Frontend Next.js

Variables requeridas y ejemplos de uso:

- `project_name` – utilizado en metadatos y archivos de configuración.
  ```tsx
  <h1>Welcome to {{ project_name }}</h1>
  ```
- `description` – descripción de la aplicación mostrada en meta etiquetas.
  ```tsx
  description: '{{ description }}',
  ```
- `typescript` – si es `true` se añaden dependencias de TypeScript.
  ```jinja
  {% if typescript %}
  "typescript": "^5.3.3",
  {% endif %}
  ```
- `styling` – define la librería de estilos a instalar.
  ```jinja
  {% if styling == "tailwind" %}
  npx tailwindcss init
  {% endif %}
  ```
- `state_management` – gestor de estado utilizado en el proyecto.
  ```jinja
  {% if state_management == "redux_toolkit" %}
  "@reduxjs/toolkit": "^1.9.7",
  {% endif %}
  ```

Variables opcionales:

- `ui_components` – instala componentes adicionales cuando es `"shadcn"`.
  ```jinja
  {% if ui_components == "shadcn" %}
  "@radix-ui/react-select": "^2.0.0",
  {% endif %}
  ```
- `pwa` – habilita configuración para aplicaciones progresivas (PWA).
  ```jinja
  {% if pwa %}
  // PWA configuration
  {% endif %}
  ```

## SaaS Basic
Variables requeridas y ejemplos de uso:

- `project_name`
  ```markdown
  # {{ project_name }}
  ```
- `description`
  ```markdown
  {{ description }}
  ```

No se definen variables opcionales para esta plantilla.
